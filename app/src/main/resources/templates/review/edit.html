<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head th:replace="~{common/head :: head(title='리뷰 수정')}"></head>

<body>
<div th:replace="~{common/header}"></div>

<div class="container mt-5" style="max-width: 800px;">
    <h2 class="text-center mb-4">리뷰 수정</h2>

    <form th:action="@{/reviews/edit/{id}(id=${review.id})}" method="post" enctype="multipart/form-data">
        <input type="hidden" name="goodsNo" th:value="${review.goods.no}" />

        <table class="table align-middle">
            <tbody>
            <tr>
                <th style="width: 150px; vertical-align:middle; border:0;">제목</th>
                <td style="border:0;">
                    <input type="text" name="title" class="form-control" th:value="${review.title}" required />
                </td>
            </tr>
            <tr>
                <th style="vertical-align:middle; border:0;">내용</th>
                <td style="border:0;">
          <textarea name="content" rows="5" class="form-control" required
                    th:text="${review.content}"></textarea>
                </td>
            </tr>
            <tr>
                <th style="vertical-align:middle; border:0;">별점</th>
                <td style="border:0;">
                    <select name="rating" class="form-select">
                        <option th:selected="${review.rating == 5}" value="5">⭐️⭐️⭐️⭐️⭐️</option>
                        <option th:selected="${review.rating == 4}" value="4">⭐️⭐️⭐️⭐️</option>
                        <option th:selected="${review.rating == 3}" value="3">⭐️⭐️⭐️</option>
                        <option th:selected="${review.rating == 2}" value="2">⭐️⭐️</option>
                        <option th:selected="${review.rating == 1}" value="1">⭐️</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th style="vertical-align:middle;">이미지 업로드</th>
                <td style="border:0;">
                    <input type="file" name="image" class="form-control" accept="image/*" />
                    <div class="mt-2" th:if="${review.imagePath != null}">
                        <img th:src="@{'/uploads/' + ${review.imagePath}}" alt="기존 이미지" style="max-width: 200px;" />
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="text-center mt-4">
            <button style="width:200px; height:54px;" type="submit" class="btn btn-dark">리뷰 수정</button>
        </div>
    </form>
</div>

<div th:replace="~{common/footer}"></div>
</body>
</html>
